<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>
      Pomelo
    </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="content-style-type" content="text/css" />
    <meta http-equiv="content-scripte-type" content="text/javascript" />
    <meta name="author" content="netease" />
    <meta name="version" content="1.0" />
    <meta name="keywords" content="pomelo" />
    <link type="text/css" rel="stylesheet" href="css/base.css" />
    <script src="js/lib/build/build.js" type="text/javascript"></script>
    <script type="text/javascript">
      require('boot');
    </script> 
    <script type="text/javascript">
        var pomelo = window.pomelo;
        var host = "127.0.0.1";
        var port = "3016";
        function show() {
            pomelo.init({
                host: host,
                port: port,
                log: true
            }, function(data) {
                // console.log(111, data) connector.entryHandler.entry  gate.gateHandler.queryEntry
                pomelo.request("gate.gateHandler.queryEntry", {uid :3323, roomId:'111'}, function(data) {
                    console.log(data, data.data)
                    pomelo.disconnect();
                    pomelo.init({
                        host: data.data.host,
                        port: data.data.clientPort,
                        log: true
                    }, function (data) {
                        pomelo.request("connector.entryHandler.entry", {uid :3323, roomId:'111'}, function(data) {
                            console.log('===', data)
                        }) 
                    })
                });
            });
        }

        function send () {

            pomelo.request("painter.painterHandler.send", {uid :3323, msg : '这是测试消息' + Math.random()}, function(data) {
                console.log('===', data)
            }) 

        }
        function send1 () {

            pomelo.request("connector.entryHandler.chat", {uid :3323, msg : '这是测试消息' + Math.random()}, function(data) {
                console.log('===', data)
            }) 

        }
        pomelo.on('onAll', function (data) {
            console.log('加入成功', data)
        })
        pomelo.on('onChat', function (data) {
            console.log('1111', data)
        })
        pomelo.on('onChatBrr', function (data) {
            console.log('22222', data)
        })
        pomelo.on('onSends', function (data) {
            console.log('33', data)
        })

    </script>
  </head>
  <body>
    <div class="g-doc">
      <div class="g-banner" style="border:none">
        <div class="logo">
          <div class="img"></div>
        </div>
      </div>
      <div class="g-background">
        <div class="g-content">
          Welcome to Pomelo
        </div>
      </div>
      <div class="g-link">
        Home:
        <a href="https://github.com/NetEase/pomelo">https://github.com/NetEase/pomelo</a>
      </div>
      <div class="g-button">
        <input id="test" type="button" value="Test Game Server" onclick="show()"/>
        <input id="send" type="button" value="send" onclick="send()"/>
        <input id="send" type="button" value="send1111111" onclick="send1()"/>
      </div>
    </div>
  </body>
</html>
